
########################################################################################
# 你可以使用以下命令查看你的显示器支持信息
# hyperctl monitors
# 配置格式：
# monitor=显示器名称,显示模式,分辨率,缩放,显示方式,主显示器名称
# 显示模式：preferred,auto,manual
# 分辨率：以x分割的两个数字，如1920x1080
# 缩放：1.0为正常缩放，0.5为缩小一倍，2.0为放大一倍
# 显示方式：mirror,extend
# 主显示器名称：如果显示方式为mirror，则此项无效
# See https://wiki.hyprland.org/Configuring/Monitors/
monitor=,preferred,auto,auto,mirror,eDP-1,bitdepth,10

########################################################################################
#启动基础服务
exec-once = waybar # 启动waybar
exec-once = fcitx5 -d --replace # 启动fcitx5 replace
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 # 启动polkit
exec-once = xprop -root -f _XWAYLAND_GLOBAL_OUTPUT_SCALE 24c -set _XWAYLAND_GLOBAL_OUTPUT_SCALE 1 # xwayland support
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP # 启动xdg-desktop-portal协议支持

########################################################################################
#启动自定义服务
exec-once = swaybg -i ~/.local/share/backgrounds/bg.jpg -m fill # 启动swaybg 并且设置背景
# exec-once = mpvpaper -s -o "no-audio loop" $(hyprctl monitors | awk '{print $2}' | awk 'NR == 1') ~/.local/share/backgrounds/bg.gif # 启动mpvpaper 动态背景
exec-once = swayidle -w timeout 600 'swaylock -c 000000' before-sleep 'swaylock -f -c 000000' # 启动swayidle 在600秒后锁屏i(调用swaylock) 在睡眠前锁屏(调用swaylock -f)

########################################################################################
# Example windowrule v2
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$
# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
windowrulev2=float,class:pavucontrol

########################################################################################
# See https://wiki.hyprland.org/Configuring/Keywords/ for more
$mainMod = SUPER # 设置主mod键为SUPER（windows键）
$menu = wofi --show=drun --lines=6 -I # 设置菜单为wofi
$once-menu = pgrep wofi && killall -s SIGINT wofi || $menu # 设置菜单为wofi

# Example binds, see https://wiki.hyprland.org/Configuring/Binds/ for more
bind = $mainMod, Return, exec, kitty # 绑定SUPER+回车键为启动终端
bind = $mainMod, Q, killactive, # 绑定SUPER+Q为关闭当前窗口
bind = $mainMod SHIFT, E, exit, # 绑定SUPER+SHIFT+E为退出Hyprland
# bind = $mainMod, E, exec, dolphin # 绑定SUPER+E为启动dolphin文件管理器
bind = $mainMod, V, togglefloating, # 绑定SUPER+V为切换窗口浮动
bind = $mainMod, D, exec, $once-menu # 绑定SUPER+D为启动菜单
bind = $mainMod, P, pseudo, # 绑定SUPER+P为切换窗口半透明
bind = $mainMod, J, togglesplit, # 绑定SUPER+J为切换窗口分割
bind = $mainMod, F, exec, hyprctl dispatcher fullscreen # 绑定SUPER+F为切换窗口全屏
bind = CTRL ALT, A, exec, grim -l 1 -g "$(slurp)" - | wl-copy && notify-send -t 3000 grim "screenshot copyed!" # 绑定CTRL+ALT+A为截图并复制到剪切板
bind = CTRL ALT, DELETE, exec, wlogout  # 绑定CTRL+ALT+DELETE为注销
bind = $mainMod, L, exec, swaylock -f -c 000000 # 绑定SUPER+L为锁屏
# Screen recorder
$recorder = wf-recorder -g "$(slurp)" -f /tmp/recording_$(date +"%Y-%m-%d_%H:%M:%S").mp4 # 设置录屏命令
$once-recorder = pgrep wf-recorder && killall -s SIGINT wf-recorder || $recorder # 设置录屏命令
bind = CTRL ALT, S, exec, $once-recorder && notify-send -t 3000 wf-recorder "recorded screen!" # 绑定CTRL+ALT+S为录屏

# 音频和亮度的绑定
binde =, XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +2% # 绑定音量增加键为增加音量2%
binde =, XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -2% # 绑定音量减少键为减少音量2%
binde =, XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle # 绑定静音键为静音
binde =, XF86AudioMicMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle # 绑定麦克风静音键为静音
binde =, XF86MonBrightnessDown, exec, brightnessctl set 5%- # 绑定亮度减少键为减少亮度5%
binde =, XF86MonBrightnessUp, exec, brightnessctl set 5%+ # 绑定亮度增加键为增加亮度5%
binde =, XF86AudioPlay, exec, playerctl play-pause # 绑定播放键为播放/暂停
binde =, XF86AudioNext, exec, playerctl next # 绑定下一首键为下一首
binde =, XF86AudioPrev, exec, playerctl previous # 绑定上一首键为上一首
binde =, XF86Search, exec, $menu # 绑定搜索键为启动菜单

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l # 绑定SUPER+左键为移动焦点到左边
bind = $mainMod, right, movefocus, r # 绑定SUPER+右键为移动焦点到右边
bind = $mainMod, up, movefocus, u # 绑定SUPER+上键为移动焦点到上边
bind = $mainMod, down, movefocus, d # 绑定SUPER+下键为移动焦点到下边

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1 # 绑定SUPER+1为切换到工作区1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1 # 绑定SUPER+SHIFT+1为移动当前窗口到工作区1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1 # 绑定SUPER+滚轮向下为切换到下一个工作区
bind = $mainMod, mouse_up, workspace, e-1 # 绑定SUPER+滚轮向上为切换到上一个工作区

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow # 绑定SUPER+鼠标左键为移动窗口
bindm = $mainMod, mouse:273, resizewindow # 绑定SUPER+鼠标右键为调整窗口大小

########################################################################################
# 一般设置
general {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more

    sensitivity = 1.0 # -1.0 - 1.0, 0 means no modification. # 鼠标灵敏度
    border_size = 0 # 边框大小
    no_border_on_floating = false # 禁用浮动窗口边框
    gaps_in = 3 # 窗口之间边距
    gaps_out = 10 # 窗口与屏幕边缘的边距

    col.inactive_border=0xff45475a # 非活动窗口边框颜色
    col.active_border=rgba(cba6f7ff) rgba(89b4faff) rgba(94e2d5ff) 10deg # 活动窗口边框颜色
    col.group_border=0xff89dceb # 不活动组边框颜色（失去焦点）
    col.group_border_active=0xfff9e2af # 活动组边框颜色（获得焦点）
    col.group_border_locked= 0x66775500 # 非活动锁定组边框颜色
    col.group_border_locked_active= 0x66ff5500 # 活动锁定组边框颜色

    cursor_inactive_timeout = 0 # 鼠标不活动多久后隐藏，0为不隐藏
    layout = dwindle # 布局，在后续选项中有介绍
    no_cursor_warps = false # 禁用鼠标自动跳转到新窗口
    no_focus_fallback = false # 禁用焦点回退
    apply_sens_to_raw = false # 是否将灵敏度应用于原始输入（例如，用鼠标瞄准的游戏）

    resize_on_border = false # 是否在边框上调整大小（鼠标单击并且拖动）
    extend_border_grab_area = false # 是否扩展边框抓取区域（当resize_on_border为true时）
    hover_icon_on_border = false # 是否在边框上显示鼠标悬停图标（当resize_on_border为true时）
}

decoration {
    rounding=8 # 边框圆角半径
    multisample_edges = true # 是否开启抗锯齿
    active_opacity = 1.0 # 活动窗口透明度
    inactive_opacity = 1.0 # 非活动窗口透明度
    fullscreen_opacity = 1.0 # 全屏窗口透明度
    drop_shadow = true # 是否开启阴影
    shadow_range = 6 # 阴影范围
    shadow_render_power = 3 # 阴影渲染强度 1-4 强度越高，阴影越模糊
    col.shadow= 0x33000000 # 阴影颜色
    col.shadow_inactive=0x22000000 # 非活动窗口阴影颜色
    shadow_offset = [0, 0] # 阴影偏移量
    shadow_scale = 1.0 # 阴影缩放

    dim_inactive = false # 非活动窗口是否变暗
    dim_strength = 0.5 # 变暗强度

    dim_special = 0.2 # 特殊窗口变暗强度
    dim_around = 0.4 # 窗口周围变暗强度

    blur {
        enabled = true # 是否开启模糊
        size = 6.8 # 模糊大小
        passes = 2 # 模糊次数
    }

}

########################################################################################
# 动画设置  https://wiki.hyprland.org/Configuring/Animations/
animations {
    enabled = true
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05 # 设置贝塞尔曲线

    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

########################################################################################
# 输入设置
input {
    kb_layout = cn
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1
    numlock_by_default = true

    touchpad {
        disable_while_typing = true # 打字时禁用触控板（防误触）
        natural_scroll = true # 自然滚动
        scroll_factor = 1.2 # 滚动因子（速度）
        middle_button_emulation = false # 中键仿真（同时按下左右键）
        clickfinger_behavior = true # 单指左键 双指右键 三指中键
        tap-to-click = true # 轻触点击
        drag_lock = true # 拖动锁定
        tap-and-drag = false # 轻触拖动
    }

}

########################################################################################
# 缩小布局 https://wiki.hyprland.org/Configuring/Dwindle-Layout/ 
dwindle {
    pseudotile = yes # 伪平铺 使用mod+p开启
    preserve_split = yes # you probably want this
}

# 主布局 https://wiki.hyprland.org/Configuring/Master-Layout/
# 左边一个大窗口，其余分割窗口在右侧
master {
    new_is_master = true
}

########################################################################################
# 手势 https://wiki.hyprland.org/Configuring/Variables/
gestures {
    workspace_swipe = true # 左右滑动切换工作区
    workspace_swipe_fingers = 3 # 至少需要三个手指
    workspace_swipe_distance = 300 # 滑动距离
    workspace_swipe_invert = true # 反向滑动
    workspace_swipe_min_speed_to_force = 30 # 最小滑动速度
    workspace_swipe_cancel_ratio = 0.7 # 取消滑动的比例(如果滑动小于这个比例，则滑动失败)
    workspace_swipe_create_new = true # 滑动创建新的工作区
    workspace_swipe_forever = false # 连续滑动
    workspace_swipe_numbered = false # 在连续的工作区编号上滑动
    workspace_swipe_use_r = false # 使用r前缀而不是m前缀来查找工作区
}
